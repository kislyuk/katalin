name: Python Code Advisor
description: Comments on PRs with suggested documentation, security, and other improvements
inputs:
  openai-api-key:
    description: The OpenAI API key used to create an authenticated OpenAI API client
    required: true
  github-token:
    description: The GitHub token used to create an authenticated GitHub API client
    default: ${{ github.token }}
    required: true
  github-event:
    description: Description of the GitHub pull request event
    default: ${{ toJson(github.event) }}
    required: true

defaults:
  run:
    shell: bash

runs:
  using: "composite"
  steps:
    - run: pip install -r "${{github.action_path}}/requirements.txt"
      shell: bash
    - run: python "${{github.action_path}}/main.py"
      shell: bash
      env:
        GITHUB_TOKEN: ${{ inputs.github-token }}
        GITHUB_EVENT: ${{ inputs.github-event }}
        OPENAI_API_KEY: ${{ inputs.openai-api-key }}
